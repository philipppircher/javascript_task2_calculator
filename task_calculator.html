<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Super-Fancy-Calculator ;)</title>

    <style>
    button {
        border:black;
        padding: 16px 16px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 32px;
        margin: 4px 2px;
        cursor: pointer;
        width: 5%;
        height: 5%;
      }

      .labels {
          width: 330px;
          height: 100px;
          font-size: 2.5em;
          text-align: right;
      }

      div{
          /*Add position in window of div here */
      }

      </style>

      <script>
          // Global variables
          //
          var str = "0";                    // concatened label text to a string, example value "99" in label "inputValue"
          var concatString = "";            // concatened every input value or operator to a string and print it in label "calculation"
          var values = [];                  // first input, second input, calculated result -> max to lenght 3 
          var ops = [];                     // collect up to 2 elements of operations (needed to behave like windows calculator)
          var result = 0;                   // saves new result value after evaluation
          var isWaitingforValue = true;     // use this to prevent multiply use of op button calculations
          var isCalcLabelSetToResult = false;

        function checkChar(value){
            if (typeof value === 'number'){
                getNumber(value);
            } else if (typeof value === 'string' && !isWaitingforValue){
                getChar(value);
                if (ops[0] == "="){
                    refreshInputValueLabelToResult();
                }
                if (isCalcLabelSetToResult){
                    document.getElementById("calculation").innerHTML = result + " " + ops[0];
                }
            }
        }

        function getNumber(num){
            console.log(num);
            refreshInputValueLabel(num);
        }

        function refreshInputValueLabel(value){ 

            // First condition sets string to value instead of concatenade them together
            // Second condition prevents "000" case ins string
            if (isWaitingforValue || document.getElementById("inputValue").innerHTML == "0"){
                str = value;
                isWaitingforValue = false;
            } else{
                str += value.toString();
            }

            document.getElementById("inputValue").innerHTML = str;
        }

        function setOperator(operator){
            ops.push(operator);
        }

        function getChar(operator){
            ops.push(operator);
            isWaitingforValue = true;
            values.push( document.getElementById("inputValue").innerHTML);

            if (ops[0] != "="){
                concatString += document.getElementById("inputValue").innerHTML + " " + ops[ops.length - 1];
            }

            document.getElementById("calculation").innerHTML = concatString;

            if (values.length == 2){
                executeOperation();
            } 
        }

        function executeOperation(){
            switch (ops[0]) {

                case '+': 
                    values.push(eval(parseFloat(values[0]) + parseFloat(values[1])));
                    break;
                case '-': 
                    values.push(eval(parseFloat(values[0]) - parseFloat(values[1])));
                    break;                        
                case '*':
                    values.push(eval(parseFloat(values[0]) * parseFloat(values[1])));
                    break;
                case '/': 
                    values.push(eval(parseFloat(values[0]) / parseFloat(values[1])));
                    break;                       
                case '%': 
                    values.push(eval(parseFloat(values[0]) % parseFloat(values[1])));
                    break;
                case '=':
                    values[2] = result;     // TODO fix bug here..
                    concatString = result;
                    isCalcLabelSetToResult = true;
                    break;
                case 'c':
                    resetAll();
                    break;
                }

                ops.shift();    

                result = values[2];
                values = [result];  // Set values back to 1 element with result value

                // Fix a bug -> if "=" selected, a new value can be entered in inputLabel
                if (ops[0] != "="){
                    refreshInputValueLabel(result);    // implemented only refresh inputValue label yet..
                    isWaitingforValue = true;
                }
                else {
                    refreshInputValueLabel(result);
                }
        }

      </script>
</head>
<body>
    <!--Labels-->
    <!---->
    <div class="labels">  
        <label id="calculation">0</label>
        <br>
        <label id="inputValue">0</label>
    </div>

    <!--Buttons-->
    <!---->
    <div id="userInterface">
        <button type="button" onclick="checkChar(7)" id="7">7</button>
        <button type="button" onclick="checkChar(8)" id="8">8</button>
        <button type="button" onclick="checkChar(9)" id="9">9</button>
        <button type="button" onclick="checkChar('+')" id="+">+</button>
        <br>
        <button type="button" onclick="checkChar(4)" id="4">4</button>
        <button type="button" onclick="checkChar(5)" id="5">5</button>
        <button type="button" onclick="checkChar(6)" id="6">6</button>
        <button type="button" onclick="checkChar('-')" id="-">-</button>
        <br>
        <button type="button" onclick="checkChar(1)" id="1">1</button>
        <button type="button" onclick="checkChar(2)" id="2">2</button>
        <button type="button" onclick="checkChar(3)" id="3">3</button>
        <button type="button" onclick="checkChar('*')" id="*">*</button>
        <br>
        <button type="button" onclick="checkChar('%')" id="%">%</button>
        <button type="button" onclick="checkChar(0)"   id="0">0</button>
        <button type="button" onclick="checkChar('=')" id="=">=</button>
        <button type="button" onclick="checkChar('/')" id="/">/</button>
        <br>
        <button type="button" onclick="checkChar('c')" id="c">c</button>
    </div>
</body>
</html>